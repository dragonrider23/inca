/*! Infrastructure-Config-Archive - v0.1.0 - GNU GPLv3 - 2015-01-10 */
"use strict";function check(a){13==a.keyCode&&(searchList(),a.preventDefault())}function searchList(){var a=$("#searchAddress").val();$("#searchResults").empty();for(var b=0;b<deviceList.length;b++)if(deviceList[b].Address===a){showSearchResult(deviceList[b]);break}}function showSearchResult(a){$("#searchResults").append("<h4>Search Results:</h4>");var b="<thead><tr>                        <td>IP Address</td>                        <td>Name</td>                        <td>Protocol</td>                        <td>Path</td>                    </tr></thead>",c='<table class="archiveList">'+b+"<tr>                    <td>"+a.Address+"</td>                    <td>"+a.Name+"</td>                    <td>"+a.Proto+'</td>                    <td><a href="view/'+a.Path+'">'+a.Path+"</a></td>                </tr></table>";$("#searchResults").append(c)}function run(){server.performRun(function(){updateView({status:!0,totalDevices:1,finished:0}),progressBar.setProgressBarToRunning(!0)}),refreshTimer=setInterval(function(){server.checkStatus(checkRequest)},750)}function checkRequest(a){updateView(a),a.status||(clearInterval(refreshTimer),progressBar.setProgressBarToRunning(!1))}function updateView(a){progressBar.setProgressBarActive(a.status),a.status===!1?($("#currentStatus").html("Idle").addClass("idleStatus"),$("#currentStatus").removeClass("runningStatus")):($("#currentStatus").html("Running").addClass("runningStatus"),$("#currentStatus").removeClass("idleStatus")),a.finished<0?(progressBar.setProgressBarMax(100),progressBar.setProgressBarValue(100)):(progressBar.setProgressBarMax(a.totalDevices),progressBar.setProgressBarValue(a.finished))}var deviceList,server={getDeviceList:function(a){$.get("/api/devicelist",{},null,"json").done(function(b){"undefined"!=typeof a&&a(b)})}};!function(){$("#searchBtn").click(searchList),$("#searchAddress").keypress(function(){check(event)}),server.getDeviceList(function(a){deviceList=a.Devices})}();var refreshTimer,server={checkStatus:function(a){$.get("/api/status",{},null,"json").done(function(b){a(b)})},performRun:function(a){$.get("/api/runnow",{},null,"json").done(function(b){a(b)})},getDeviceList:function(a){$.get("/api/devicelist",{},null,"json").done(function(b){a(b)})}},progressBar={setProgressBarValue:function(a){var b=$("#statusProgressBar").attr("aria-valuemax");$("#statusProgressBar").css("width",a/b*100+"%").attr("aria-valuenow",a)},setProgressBarMax:function(a){$("#statusProgressBar").attr("aria-valuemax",a)},setProgressBarActive:function(a){a?($("#statusProgressBar").addClass("active"),$("#statusProgressBar").addClass("progress-bar-striped")):($("#statusProgressBar").removeClass("active"),$("#statusProgressBar").removeClass("progress-bar-striped"))},setProgressBarToRunning:function(a){a?($("#statusProgressBar").addClass("progress-bar-danger"),$("#statusProgressBar").removeClass("progress-bar-success")):($("#statusProgressBar").removeClass("progress-bar-danger"),$("#statusProgressBar").addClass("progress-bar-success"))}};!function(){$("#startArchiveBtn").click(run),server.checkStatus(updateView)}();
//# sourceMappingURL=maps/sourcemap.map