/*! inca - v2.2.0 - BSD-3-Clause - 2017-06-14 */
"use strict";function singleRun(e,r,s,t){server.runSingleDeviceGrab(e,r,s,t,function(e){alert("Downloading new config. Check Status page.")})}function check(e){13==e.keyCode&&(searchList(),e.preventDefault())}function searchList(){var e=$("#searchAddress").val();$("#searchResults").empty();for(var r=0;r<deviceList.length;r++)if(deviceList[r].Address===e){showSearchResult(deviceList[r]);break}}function showSearchResult(e){$("#searchResults").append("<h4>Search Results:</h4>");var r='<table class="archiveList"><thead><tr>                        <td>IP Address</td>                        <td>Name</td>                        <td>Protocol</td>                        <td>Path</td>                    </tr></thead><tr>                    <td>'+e.Address+"</td>                    <td>"+e.Name+"</td>                    <td>"+e.Proto+'</td>                    <td><a href="view/'+e.Path+'">'+e.Path+"</a></td>                </tr></table>";$("#searchResults").append(r)}function saveDeviceList(){var e=$("#deviceListConfig").val();$.post("/api/savedevicelist",{text:encodeURIComponent(e)},null,"json").done(function(e){e.success?alert("Device list saved"):alert(e.error)})}function saveDeviceTypes(){var e=$("#deviceTypeConfig").val();$.post("/api/savedevicetypes",{text:encodeURIComponent(e)},null,"json").done(function(e){e.success?alert("Device type definitions saved"):alert(e.error)})}function run(){server.performRun(function(e){view.updateView({running:!0,totalDevices:1,finished:0}),progressBar.setProgressBarToRunning(!0)}),null===runningRefreshTimer&&(runningRefreshTimer=setInterval(function(){server.checkStatus(checkRequest)},1e3))}function checkRequest(e){view.updateView(e),e.running||(clearInterval(runningRefreshTimer),runningRefreshTimer=null,progressBar.setProgressBarToRunning(!1))}function manualSingleDeviceRun(){var e=$("#manName").val(),r=$("#manAddr").val(),s=$("#manType").val(),t=$("#manProto").val();server.runSingleDeviceGrab(r,s,t,e,function(e){alert("Downloading new config. Check Status page.")})}var deviceList;if(void 0===server)var server={};server.getDeviceList=function(e){$.get("/api/devicelist",{},null,"json").done(function(r){void 0!==e&&e(r)})},server.runSingleDeviceGrab=function(e,r,s,t,n){$.get("/api/singlerun",{hostname:e,name:t,proto:s,brand:r},null,"json").done(function(e){void 0!==n&&n(e)})},$("#searchBtn").click(searchList),$("#searchAddress").keypress(function(){check(event)}),server.getDeviceList(function(e){deviceList=e.Devices});var runningRefreshTimer=null,bgRefreshTimer=null,view={updateView:function(e){progressBar.setProgressBarActive(e.running),!1===e.running?($("#currentStatus").html("Idle").addClass("idleStatus"),$("#currentStatus").removeClass("runningStatus"),server.getErrorLog(view.updateLogView),null===bgRefreshTimer&&(bgRefreshTimer=setInterval(function(){server.checkStatus(view.updateView)},3e4))):($("#currentStatus").html("Running").addClass("runningStatus"),$("#currentStatus").removeClass("idleStatus"),server.getErrorLog(view.updateLogView),null===runningRefreshTimer&&(clearInterval(bgRefreshTimer),bgRefreshTimer=null,progressBar.setProgressBarToRunning(!0),runningRefreshTimer=setInterval(function(){server.checkStatus(checkRequest)},1e3))),e.finished<0?(progressBar.setProgressBarMax(100),progressBar.setProgressBarValue(100)):(progressBar.setProgressBarMax(e.totalDevices),progressBar.setProgressBarValue(e.finished))},updateLogView:function(e){var r=$("<table/>");r.append("<thead><tr>            <td>Type</td>            <td>Time</td>            <td>Message</td>            </tr></thead>");for(var s in e)if(e.hasOwnProperty(s)){var t=e[s],n='<tr class="'+t.Etype.toLowerCase()+'">                <td class="'+t.Etype.toLowerCase()+'">'+t.Etype+"</td>                <td>"+t.Time+"</td>                <td>"+t.Message+"</td>                </tr>";r.append(n)}$("#appLogs").empty(),$("#appLogs").append(r)}},server={checkStatus:function(e){$.get("/api/status",{},null,"json").done(function(r){void 0!==e&&e(r)})},performRun:function(e){$.get("/api/runnow",{},null,"json").done(function(r){void 0!==e&&e(r)})},getDeviceList:function(e){$.get("/api/devicelist",{},null,"json").done(function(r){void 0!==e&&e(r)})},getErrorLog:function(e){$.get("/api/errorlog",{limit:10},null,"json").done(function(r){void 0!==e&&e(r)})}},progressBar={setProgressBarValue:function(e){var r=$("#statusProgressBar").attr("aria-valuemax");$("#statusProgressBar").css("width",e/r*100+"%").attr("aria-valuenow",e)},setProgressBarMax:function(e){$("#statusProgressBar").attr("aria-valuemax",e)},setProgressBarActive:function(e){e?($("#statusProgressBar").addClass("active"),$("#statusProgressBar").addClass("progress-bar-striped")):($("#statusProgressBar").removeClass("active"),$("#statusProgressBar").removeClass("progress-bar-striped"))},setProgressBarToRunning:function(e){e?($("#statusProgressBar").addClass("progress-bar-danger"),$("#statusProgressBar").removeClass("progress-bar-success")):($("#statusProgressBar").removeClass("progress-bar-danger"),$("#statusProgressBar").addClass("progress-bar-success"))}};$("#startArchiveBtn").click(run),$("#manualRunBtn").click(manualSingleDeviceRun),server.checkStatus(view.updateView),server.getErrorLog(view.updateLogView),bgRefreshTimer=setInterval(function(){server.checkStatus(view.updateView)},3e4);
//# sourceMappingURL=maps/sourcemap.map