!function(t){var e={};function r(n){if(e[n])return e[n].exports;var s=e[n]={i:n,l:!1,exports:{}};return t[n].call(s.exports,s,s.exports,r),s.l=!0,s.exports}r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)r.d(n,s,function(e){return t[e]}.bind(null,s));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=0)}([function(t,e,r){"use strict";let n=null,s=null;const a={stage:"",running:!0,totalDevices:1,finished:0};function o(){l.performRun(function(t){i.updateView(a),g.setProgressBarToRunning(!0)}),null===n&&(n=setInterval(function(){l.checkStatus(u)},1e3))}function u(t){i.updateView(t),t.running||(clearInterval(n),n=null,g.setProgressBarToRunning(!1))}const i={updateView:function(t){g.setProgressBarActive(t.running),!1===t.running?($("#currentStatus").html("Idle").addClass("idleStatus"),$("#currentStatus").removeClass("runningStatus"),l.getErrorLog(i.updateLogView),null===s&&(s=setInterval(function(){l.checkStatus(i.updateView)},3e4))):(""!==t.stage?$("#currentStatus").html(`Running - ${function(t){switch(t){case"grabbing":return"Grabbing";case"loading-configuration":return"Loading Configuration";case"post-script":return"Post Script";case"pre-script":return"Pre Script"}}(t.stage)}`).addClass("runningStatus"):$("#currentStatus").html("Running").addClass("runningStatus"),$("#currentStatus").removeClass("idleStatus"),l.getErrorLog(i.updateLogView),null===n&&(clearInterval(s),s=null,g.setProgressBarToRunning(!0),n=setInterval(function(){l.checkStatus(u)},1e3))),t.finished<0?(g.setProgressBarMax(100),g.setProgressBarValue(100)):(g.setProgressBarMax(t.totalDevices),g.setProgressBarValue(t.finished))},updateLogView:function(t){const e=$("<table/>");e.append("<thead><tr>            <td>Type</td>            <td>Time</td>            <td>Message</td>            </tr></thead>");for(let r in t){if(!t.hasOwnProperty(r))continue;const n=t[r],s='<tr class="'+n.Etype.toLowerCase()+'">                <td class="'+n.Etype.toLowerCase()+'">'+n.Etype+"</td>                <td>"+n.Time+"</td>                <td>"+n.Message+"</td>                </tr>";e.append(s)}$("#appLogs").empty(),$("#appLogs").append(e)}};function c(){const t=$("#manName").val(),e=$("#manAddr").val(),r=$("#manType").val(),n=$("#manProto").val();l.runSingleDeviceGrab(e,r,n,t,function(t){alert("Downloading new config. Check Status page.")})}const l={checkStatus:function(t){$.get("/api/status",{},null,"json").done(function(e){void 0!==t&&t(e)})},performRun:function(t){$.get("/api/runnow",{},null,"json").done(function(e){void 0!==t&&t(e)})},getDeviceList:function(t){$.get("/api/devicelist",{},null,"json").done(function(e){void 0!==t&&t(e)})},getErrorLog:function(t){$.get("/api/errorlog",{limit:10},null,"json").done(function(e){void 0!==t&&t(e)})}},g={setProgressBarValue:function(t){const e=$("#statusProgressBar").attr("aria-valuemax");$("#statusProgressBar").css("width",t/e*100+"%").attr("aria-valuenow",t)},setProgressBarMax:function(t){$("#statusProgressBar").attr("aria-valuemax",t)},setProgressBarActive:function(t){t?($("#statusProgressBar").addClass("active"),$("#statusProgressBar").addClass("progress-bar-striped")):($("#statusProgressBar").removeClass("active"),$("#statusProgressBar").removeClass("progress-bar-striped"))},setProgressBarToRunning:function(t){t?($("#statusProgressBar").addClass("progress-bar-danger"),$("#statusProgressBar").removeClass("progress-bar-success")):($("#statusProgressBar").removeClass("progress-bar-danger"),$("#statusProgressBar").addClass("progress-bar-success"))}};$("#startArchiveBtn").click(o),$("#manualRunBtn").click(c),l.checkStatus(i.updateView),l.getErrorLog(i.updateLogView),s=setInterval(function(){l.checkStatus(i.updateView)},3e4)}]);
//# sourceMappingURL=main.min.js.map